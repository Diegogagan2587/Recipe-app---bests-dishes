<div class="body-max-width mx-auto mt-5">
  <div class="card w-50 mx-auto">
    <div class="card-header d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center">
        <i class="bi bi-journal me-2 fs-4"></i>
        <h4 class="m-0"><%= @recipe.name %></h4>
      </div>
      <%= link_to 'Back to Recipes', recipes_path, class: 'btn btn-outline-secondary' %>
    </div>
    <div class="d-flex flex-column gap-3 p-3">
      <div class="d-flex justify-content-between">
        <p class="mb-0"><strong>Preparation Time:</strong> <%= @recipe.preparation_time %> minutes</p>
        <div class="form-check form-switch">
          <label class="form-check-label" for="flexSwitchCheckDefault">Public</label>
          <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" <%= @recipe.public ? 'checked' : '' %> disabled>
        </div>
      </div>
      <p class="mb-0"><strong>Cooking Time:</strong> <%= @recipe.cooking_time %> minutes</p>
      <p class="mb-0"><strong>Description:</strong> <%= @recipe.description %></p>
      <div class="d-flex justify-content-between">
        <%= link_to general_shopping_lists_path, class: 'btn btn-secondary px-4' do %>
          Go to my Shopping List
          <i class="bi bi-box-arrow-up-right text-white ms-1"></i>
        <% end %>
        <% if current_user == @recipe.user %>
          <%= link_to '+ Add Ingredient', new_recipe_food_path(recipe_id: @recipe.id), class: 'btn btn-primary px-4' %>
        <% else %>
          <%= button_to '+ Add Ingredient', new_recipe_food_path(recipe_id: @recipe.id), class: 'btn btn-primary px-4 disabled' %>
        <% end %>
      </div>
    </div>
    <div class="card-body">
      <% if @ingredients.present? %>
        <div class="row">
          <% @ingredients.each do |item| %>
            <div class="col-md-6">
              <div class="card ingredient-card mb-4">
                <div class="card-body">
                  <h5 class="card-title"><%= item[:name] %></h5>
                  <p class="card-text">
                    <strong>Quantity:</strong> <%= item[:quantity] %> <%= item[:measurement_unit] %><% if item[:measurement_unit].length > 2 && item[:quantity] > 1 %>s<% end %><br>
                    <strong>Price:</strong> <%= number_to_currency(item[:price]) %>
                  </p>
                </div>
                <div class="card-footer">
                  <% if current_user == @recipe.user %>
                    <%= button_to 'Remove', recipe_food_path(item[:id]), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-remove' %>
                  <% else %>
                    <small class="text-not-allowed">Not allowed</small>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
